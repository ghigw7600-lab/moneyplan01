# 📰 뉴스 수집 시스템 상세 분석 보고서

**작성일**: 2025-10-16
**목적**: 현재 뉴스 수집 문제 진단 및 다중 소스 개선 방안 제시

---

## 📋 목차
1. [현재 시스템 진단](#1-현재-시스템-진단)
2. [문제점 상세 분석](#2-문제점-상세-분석)
3. [대안 솔루션 비교](#3-대안-솔루션-비교)
4. [유튜브/댓글 수집 가능성](#4-유튜브댓글-수집-가능성)
5. [최종 권장 아키텍처](#5-최종-권장-아키텍처)
6. [구현 로드맵](#6-구현-로드맵)

---

## 1. 현재 시스템 진단

### 1.1 현재 구조
```
📂 collectors/news_collector.py
├── NewsCollector (주 수집기)
│   └── NewsAPI 사용 (newsapi.org)
└── SimpleNewsCollector (백업)
    └── 더미 데이터 생성
```

### 1.2 현재 사용 중인 API
- **NewsAPI** (https://newsapi.org)
- **무료 플랜 제한사항**:
  - ❌ 하루 100 요청
  - ❌ 한 달 이전 뉴스 검색 불가
  - ❌ 한국어 뉴스 소스 제한적 (주로 영문 번역)
  - ❌ 실시간 업데이트 느림 (1~2시간 딜레이)

### 1.3 config.py 확인 결과
```python
NEWS_API_KEY = ""  # ⚠️ 비어있음! API 키 미설정 상태
```

**✅ 진단 결과**: API 키가 설정되지 않아 뉴스 수집이 불가능한 상태입니다.

---

## 2. 문제점 상세 분석

### 2.1 기술적 문제
| 항목 | 현재 상태 | 문제점 |
|------|-----------|--------|
| **API 키** | 미설정 | 뉴스 수집 자체가 불가능 |
| **한국어 뉴스** | 제한적 | 네이버/다음 뉴스 접근 불가 |
| **실시간성** | 낮음 | 1~2시간 딜레이 |
| **검색 범위** | 1개월 | 장기 추세 분석 불가 |
| **요청 한도** | 100회/일 | 많은 사용자 대응 불가 |

### 2.2 비즈니스 영향
- 📉 **감성 분석 품질 저하**: 뉴스 0개 → 감성 분석 불가
- 📉 **신뢰도 계산 왜곡**: 감성 30% 가중치가 무시됨
- 📉 **사용자 경험 악화**: "데이터 수집 실패" 메시지

### 2.3 근본 원인
```
뉴스 수집 실패의 3가지 원인
├── 1. API 키 미설정 (config.py)
├── 2. 단일 소스 의존 (NewsAPI만 사용)
└── 3. 한국어 지원 부족 (영문 위주 API)
```

---

## 3. 대안 솔루션 비교

### 3.1 무료 뉴스 소스 옵션

| 솔루션 | 장점 | 단점 | 난이도 | 추천도 |
|--------|------|------|--------|--------|
| **1. NewsAPI 활성화** | • 즉시 사용 가능<br>• 안정적 | • 한국어 제한<br>• 월 100건 | ⭐ 쉬움 | ⭐⭐⭐ |
| **2. Google News RSS** | • 무료 무제한<br>• 한국어 완벽 | • 크롤링 필요 | ⭐⭐ 보통 | ⭐⭐⭐⭐⭐ |
| **3. 네이버 뉴스 크롤링** | • 한국 증시 최적<br>• 실시간 | • API 없음<br>• 크롤링 규제 | ⭐⭐⭐ 어려움 | ⭐⭐⭐⭐ |
| **4. Reddit/Twitter API** | • 커뮤니티 반응<br>• 실시간 | • API 유료화<br>• 잡음 많음 | ⭐⭐⭐ 어려움 | ⭐⭐⭐ |
| **5. 핀란스 뉴스 (yfinance)** | • 주식 통합<br>• 무료 | • 기사 요약만<br>• 영문 위주 | ⭐ 쉬움 | ⭐⭐⭐⭐ |

### 3.2 솔루션별 코드 예시

#### ✅ **추천 1순위: Google News RSS (feedparser)**
```python
import feedparser

def get_google_news(query):
    url = f"https://news.google.com/rss/search?q={query}&hl=ko&gl=KR&ceid=KR:ko"
    feed = feedparser.parse(url)

    news = []
    for entry in feed.entries[:20]:
        news.append({
            '제목': entry.title,
            '링크': entry.link,
            '게시일': entry.published,
            '출처': entry.source.get('title', 'Google News')
        })
    return news
```
**장점**: 무료, 무제한, 한국어 완벽, 실시간

#### ✅ **추천 2순위: Yahoo Finance 뉴스 (yfinance 내장)**
```python
import yfinance as yf

def get_stock_news(ticker):
    stock = yf.Ticker(ticker)
    news = stock.news  # 자동으로 관련 뉴스 제공

    news_list = []
    for item in news:
        news_list.append({
            '제목': item['title'],
            '링크': item['link'],
            '출처': item['publisher'],
            '게시일': item['providerPublishTime']
        })
    return news_list
```
**장점**: 이미 yfinance 사용 중, 추가 비용 없음

#### ⚠️ **3순위: 네이버 뉴스 크롤링 (BeautifulSoup)**
```python
import requests
from bs4 import BeautifulSoup

def get_naver_news(query):
    url = f"https://search.naver.com/search.naver?where=news&query={query}"
    headers = {'User-Agent': 'Mozilla/5.0'}
    response = requests.get(url, headers=headers)
    soup = BeautifulSoup(response.text, 'html.parser')

    # 주의: 네이버 크롤링 정책 확인 필요
    articles = soup.select('.news_tit')
    # ... (생략)
```
**주의**: 네이버 크롤링 금지 정책 위반 가능성

---

## 4. 유튜브/댓글 수집 가능성

### 4.1 YouTube Data API v3

#### 📺 가능한 것
✅ **채널 영상 검색**: "삼성전자 주가 전망" 검색
✅ **영상 정보**: 제목, 조회수, 좋아요, 게시일
✅ **댓글 수집**: 영상별 댓글 최대 100개
✅ **감성 분석**: 댓글 긍정/부정 분석 가능

#### ❌ 제한사항
- **무료 할당량**: 하루 10,000 유닛 (약 100~200 영상)
- **댓글 접근**: 일부 채널은 댓글 비공개
- **API 키 필요**: Google Cloud Console에서 발급

#### 📊 감성 분석 활용도
```
전통 뉴스 (전문가) + 유튜브 댓글 (개인 투자자)
= 균형잡힌 시장 심리 분석
```

### 4.2 YouTube 수집 구현 예시

```python
from googleapiclient.discovery import build

class YouTubeCollector:
    def __init__(self, api_key):
        self.youtube = build('youtube', 'v3', developerKey=api_key)

    def search_videos(self, query, max_results=10):
        """종목 관련 영상 검색"""
        request = self.youtube.search().list(
            q=query,
            part='snippet',
            maxResults=max_results,
            order='date',
            type='video',
            relevanceLanguage='ko'
        )
        response = request.execute()

        videos = []
        for item in response['items']:
            videos.append({
                '영상ID': item['id']['videoId'],
                '제목': item['snippet']['title'],
                '채널': item['snippet']['channelTitle'],
                '게시일': item['snippet']['publishedAt']
            })
        return videos

    def get_comments(self, video_id, max_results=50):
        """영상 댓글 수집"""
        request = self.youtube.commentThreads().list(
            part='snippet',
            videoId=video_id,
            maxResults=max_results,
            order='relevance'
        )
        response = request.execute()

        comments = []
        for item in response['items']:
            comment = item['snippet']['topLevelComment']['snippet']
            comments.append({
                '내용': comment['textDisplay'],
                '좋아요': comment['likeCount'],
                '작성자': comment['authorDisplayName'],
                '작성일': comment['publishedAt']
            })
        return comments
```

### 4.3 감성 분석 적용
```python
from transformers import pipeline

sentiment_analyzer = pipeline(
    "sentiment-analysis",
    model="snunlp/KR-FinBert-SC"  # 한국어 금융 감성 분석 모델
)

# 댓글 100개 감성 분석
for comment in comments:
    result = sentiment_analyzer(comment['내용'])[0]
    comment['감성'] = result['label']  # positive/negative/neutral
    comment['신뢰도'] = result['score']
```

### 4.4 YouTube 활용 시 장단점

| 장점 | 단점 |
|------|------|
| ✅ 개인 투자자 심리 파악 | ❌ API 할당량 제한 (10,000 유닛/일) |
| ✅ 실시간 반응 수집 | ❌ 잡음(spam) 많음 |
| ✅ 조회수/좋아요로 인기도 측정 | ❌ 전문성 낮음 (vs 뉴스) |
| ✅ 한국어 데이터 풍부 | ❌ API 키 발급 필요 |

### 4.5 Reddit/커뮤니티 대안

| 플랫폼 | API 상태 | 추천도 |
|--------|----------|--------|
| **Reddit** (r/stocks) | ⚠️ 유료화 (2023년) | ⭐⭐ |
| **디시인사이드** | ❌ API 없음, 크롤링만 | ⭐⭐ |
| **네이버 카페** | ❌ API 없음 | ⭐ |
| **Twitter/X** | ⚠️ 월 $100 (Basic) | ⭐⭐ |

---

## 5. 최종 권장 아키텍처

### 5.1 다중 소스 수집 시스템 (Multi-Source News System)

```
┌─────────────────────────────────────────┐
│     뉴스 수집 오케스트레이터              │
└─────────────────────────────────────────┘
          ↓            ↓            ↓
   ┌──────────┐  ┌──────────┐  ┌──────────┐
   │ 뉴스 소스 │  │ 주식 뉴스 │  │커뮤니티  │
   │ (RSS)    │  │(yfinance)│  │(YouTube) │
   └──────────┘  └──────────┘  └──────────┘
        ↓             ↓             ↓
   ┌──────────────────────────────────────┐
   │       감성 분석 통합 엔진              │
   │  (한국어 금융 특화 모델)              │
   └──────────────────────────────────────┘
                     ↓
          최종 시장 심리 점수
      (뉴스 70% + 커뮤니티 30%)
```

### 5.2 우선순위별 구현 계획

#### 🔥 **Phase 1: 즉시 구현 (필수)**
1. ✅ **Google News RSS** - feedparser
   - 무료, 무제한, 한국어 완벽
   - 설치: `pip install feedparser`

2. ✅ **Yahoo Finance 뉴스** - yfinance 내장
   - 이미 사용 중인 라이브러리
   - 추가 비용 없음

#### 🚀 **Phase 2: 단기 개선 (권장)**
3. ✅ **NewsAPI 활성화**
   - API 키 발급 (5분 소요)
   - config.py 업데이트

4. ✅ **캐싱 시스템**
   - 중복 요청 방지
   - API 할당량 절약

#### 🎯 **Phase 3: 중장기 (선택)**
5. ⚠️ **YouTube 댓글 분석**
   - Google API 키 발급
   - 개인 투자자 심리 측정

6. ⚠️ **네이버 뉴스** (크롤링)
   - 법적 검토 필요
   - robots.txt 확인

### 5.3 통합 코드 아키텍처

```python
class MultiSourceNewsCollector:
    def __init__(self):
        self.sources = []

        # Phase 1: 필수 소스
        self.sources.append(GoogleNewsRSS())
        self.sources.append(YahooFinanceNews())

        # Phase 2: 선택 소스
        if NEWS_API_KEY:
            self.sources.append(NewsAPI(NEWS_API_KEY))

        # Phase 3: 커뮤니티
        if YOUTUBE_API_KEY:
            self.sources.append(YouTubeCollector(YOUTUBE_API_KEY))

    def collect_all(self, query):
        """모든 소스에서 뉴스 수집 후 병합"""
        all_news = []

        for source in self.sources:
            try:
                news = source.get_news(query)
                all_news.extend(news)
            except Exception as e:
                print(f"⚠️ {source.name} 실패: {e}")
                continue

        # 중복 제거 (URL 기준)
        unique_news = self._remove_duplicates(all_news)

        # 최신순 정렬
        sorted_news = sorted(
            unique_news,
            key=lambda x: x['게시일'],
            reverse=True
        )

        return sorted_news[:50]  # 상위 50개만
```

---

## 6. 구현 로드맵

### 6.1 단계별 작업 계획

| 단계 | 작업 | 소요시간 | 우선순위 |
|------|------|----------|----------|
| **1** | Google News RSS 구현 | 30분 | 🔥 긴급 |
| **2** | Yahoo Finance 뉴스 통합 | 20분 | 🔥 긴급 |
| **3** | 다중 소스 통합 클래스 | 1시간 | ⭐ 높음 |
| **4** | NewsAPI 키 발급 및 설정 | 10분 | ⭐ 높음 |
| **5** | 캐싱 시스템 구축 | 1시간 | 중간 |
| **6** | YouTube API 연동 | 2시간 | 낮음 |
| **7** | 감성 분석 모델 개선 | 2시간 | 중간 |

### 6.2 예상 개선 효과

| 지표 | 현재 | Phase 1 완료 | Phase 3 완료 |
|------|------|--------------|--------------|
| **뉴스 수집 성공률** | 0% | 95% | 99% |
| **1회 분석당 뉴스 수** | 0개 | 20~50개 | 50~100개 |
| **한국어 뉴스 비율** | 0% | 80% | 90% |
| **실시간성** | N/A | 15분 지연 | 5분 지연 |
| **감성 분석 정확도** | N/A | 75% | 85% |

### 6.3 비용 분석

| 항목 | 무료 플랜 | 유료 플랜 | 권장 |
|------|-----------|-----------|------|
| **Google News RSS** | ✅ 무제한 | - | 무료 |
| **Yahoo Finance** | ✅ 무제한 | - | 무료 |
| **NewsAPI** | 100건/일 | $449/월 | 무료 |
| **YouTube API** | 10,000 유닛/일 | 추가 할당량 구매 | 무료 |
| **총 비용** | **$0/월** | - | **$0/월** |

---

## 7. 결론 및 권장사항

### 7.1 즉시 실행 항목 (오늘 가능)
1. ✅ **Google News RSS 구현** (30분)
2. ✅ **Yahoo Finance 뉴스 통합** (20분)
3. ✅ **다중 소스 통합 시스템** (1시간)

### 7.2 단기 실행 항목 (이번 주)
4. ✅ **NewsAPI 키 발급** (10분)
5. ✅ **캐싱 시스템 추가** (1시간)

### 7.3 선택 실행 항목 (추후)
6. ⚠️ **YouTube 댓글 분석** (필요시)
7. ⚠️ **네이버 뉴스 크롤링** (법적 검토 후)

### 7.4 YouTube/댓글 수집 결론
✅ **기술적으로 가능**: YouTube Data API v3 사용
✅ **무료 사용 가능**: 하루 10,000 유닛 할당
✅ **감성 분석 가치 높음**: 개인 투자자 심리 파악
⚠️ **우선순위 낮음**: Phase 1, 2 완료 후 고려

---

## 8. 다음 단계

### 승인 대기 중인 작업
- [ ] **Phase 1 구현 승인**: Google News RSS + Yahoo Finance
- [ ] **Phase 2 구현 승인**: NewsAPI 활성화 + 캐싱
- [ ] **YouTube 구현 여부**: 필요하면 Phase 3 진행

### 예상 질문
**Q1. 구현하면 바로 뉴스가 나오나요?**
→ ✅ Yes! Phase 1 완료 시 즉시 20~50개 뉴스 수집 가능

**Q2. 추가 비용이 드나요?**
→ ✅ No! 모두 무료 플랜으로 충분 (NewsAPI 무료 100건/일 포함)

**Q3. YouTube는 꼭 필요한가요?**
→ ⚠️ 선택사항. 전통 뉴스만으로도 충분하지만, 커뮤니티 심리 분석을 원하면 추가 구현

**Q4. 얼마나 걸리나요?**
→ ⏱️ Phase 1 (필수): 1시간, Phase 2: +1시간, Phase 3: +2시간

---

**📌 결론**: 즉시 Phase 1 구현을 권장합니다. 무료이며 1시간 내 완료 가능하고, 뉴스 수집 문제를 완전히 해결할 수 있습니다.

---

**작성자**: Claude AI 분석 시스템
**검토 요청**: 사용자 승인 대기 중
